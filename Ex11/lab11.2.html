<html>
    <head>
        <title>23BCE1624 - Welcome to my page</title>
        <script>
            window.onload = function () {
                var t;
                var x = document.getElementById("disp");

                document.getElementById("bday").addEventListener("mouseover", function () {
                    if (this.value === '') {
                        document.getElementById("disp2").innerHTML = 'Please select a date.';
                        return;
                    }

                    const date1 = new Date();
                    const date2 = new Date(this.value);

                    let age = date1.getFullYear() - date2.getFullYear();
                    const monthdiff = date1.getMonth() - date2.getMonth();

                    if (monthdiff < 0 || (monthdiff === 0 && date1.getDate() < date2.getDate())) {
                        age--;
                    }
                    if(date2 > date1){
                        age=0;
                    }

                    document.getElementById("disp2").innerHTML = age + " years old.";
                });
            };
            function startf() {
                t = setInterval(clck1, 1000);
                cval = 1;
                function clck1() {
                    cval++; 

                    var hours = Math.floor(cval / 3600);  
                    var minutes = Math.floor((cval % 3600) / 60);  
                    var seconds = cval % 60;  
                    hours = hours < 10 ? "0" + hours : hours;
                    minutes = minutes < 10 ? "0" + minutes : minutes;
                    seconds = seconds < 10 ? "0" + seconds : seconds;

                    document.getElementById("clk").innerHTML = hours + ":" + minutes + ":" + seconds;
                }
            }

            function stopf() {
                window.clearInterval(t);
            }

            function rf() {
                document.getElementById("clk").innerHTML = "00:00:00";
                cval = 0;
            }


            function limit(element) {
                var charsLeftDisplay = document.getElementById("charsLeft");
                charsLeftDisplay.innerHTML = "Character count: " + element.value.length;
            }
        </script>
    </head>

    <body>
        <table border="1" cellpadding="10" cellspacing="10" align="center">
            <tr>
                <td>
                    <div align="center">
                        <h1> Stopwatch </h1>
                        <p id="clk"></p>
                        <input type="button" value="start" id="st" onclick="startf()">
                        <input type="button" value="stop" id="sp" onclick="stopf()">
                        <input type="button" value="reset" id="re" onclick="rf()">
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div align="center">
                        <h1> Age calculator</h1>
                        <input type="date" id="bday">
                        <p id="disp2"></p>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div align="center">
                        <h1> Dynamic count for characters</h1>
                        <textarea onkeyup="limit(this)"></textarea>
                        <p id="charsLeft">Character count: 0</p>
                    </div>
                </td>
            </tr>
        </table>
    </body>
</html>
